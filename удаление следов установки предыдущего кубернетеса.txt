прежде чем ставить куб надо удалить старый докер и старый кубернетес
с серверера.
как удалить следы старой установки 

a) # kubeadm reset

a1) придется еще руками заресетить правила iptables

b) но этого недостаточно.
надо проверить /etc/default/kubelet и удалить либо изменить там на коректный high-level runtime который будет кубелет использовать

c) /etc/systemd/system/kubelet.service.d 
проверить нет ли там лишнего и сам конфиг

в)   apt-get -y purge  kube*

прикол в том что кубернетес неудаляет за собой 
созданные контенерйнеры. 
это надо помнить.


д) проверить какие стоят на ноде рантаймы

# dpkg -l | grep -E "docker|container|singularity"
# ps aux | grep -E "docker|container|sycri" 
какие ненужны удалить 
например  удалить docker

# apt-get -y purge docker* 
# apt-get -y purge containerd*

также я заметил что это неудаляет полностью докер. 
поэтому также полезно

# rm -r /var/lib/docker


  

какие нужно доставить

если мы неудаляем докер и у нас есть контейнеры 
# docker ps -a

и имаджи.

их надо удалить. чтоб немешались.

# docker rm `docker ps -a | awk '{print $1}' | grep -v -i container`
# docker rmi `docker images -a | awk '{print $1}'`
руками удалять в /var/lib/docker/overlays2 несоветую.
потому что докер будет потом писать ошибки что мол я ищу
и ненахожу имадж например.


тут же скажу как узнать к какому  systemd unit относится бинарник который мы обнаружили через ps aux. берем pid бинарника и

# systemctl status  27952

все ноду зачистили от старого. рантайм если нужно доставили

пеезагрузиться и убедиться что никакие kubectl не сидят на сокетах  и ничего не слушают

# netstat -nlp

теперь порядок
теперь можно ставить куб
-----

