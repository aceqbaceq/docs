mc2


ксатии я походу понял как рабоате midnight commander и его Ctrl-O переход в баш
суть такая . заупкается mc и он запускает баш.
далее mc заказывает у ядра терминал. mc открывает ptmx  хвост от терминала.
а башу подсоывает /dev/pts/N хвост. далее обычно наш mc запущен через скажем gnome-terminal-server
поэтому сам mc имеет открытыт pts/10 от гном терминала а гном терминал через сокет
открывает граф окно на экране . итго схема


граф черный экран --- (ядро видеокарта драйвер) ---- (<сокет, gnome-gernnal-server,ptmx>)---
---(ядро, вирт термиал)---- (<pts/10, mc , ptmx>) --- (ядро, еще один вирт терминал)---
---(<pts/N, bash)

так вот когда мы в синем экране mc то он шлет от себя и своего кода данные 
через pts/10 туда наверх. и мы видим в граф окне синием окна.
а когда мы жмем Ctrl-O то это mc щлет данные в баш через ptmx и принимает от него 
обратно данные  и пересылвает их наверх через pts/10 ! вот как это работает! тоесть
mc чеорез себя проксирует ввод\вывод к баш процессу когда мы работаем в Ctrl-O окне!
если же мы через mc в баш запускает новый прцоесс. то баш процесс он когда форкается
то он передает те же файл дескрипторы в fd/0 fd/1 fd/2 нового роцесса и поэтому новый
прроцесс он шлет все данные в тот же самый  pts/N файл! а сам баш на время затыкается.
потом коогда мы выходим из чайлда баша (скажем комнада /bin/ls) то баш просывается и 
как и прежде срет в /dev/pts/N ! гениально!
поэтмоу mc так легко и прорачо проксирует нетлко доступ  в баш но и в его дочерние 
процессы!


