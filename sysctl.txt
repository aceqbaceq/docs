| sysctl

эта команда которая юзает конфиг sysctl.conf она как работает.
она считывает конфиг  и по факту она делает изменение в /proc точнее в папке
	/proc/sys/...

в которой находятся переменные лежащие внутри ядра. поэтому подкручивая файлы
в /proc/sys мы подкручивем переменные внтри ядра. таким макаром влияя существенно
на работу ядра линукса и значит компа в целом. 

как я понял из man systctl что чтобы эта команда сработала то нужно обязателно чтобы
ФС /proc была смонтирована. без нее sysctl не сможет нихрена сделать.
как я понял можно неюзать sysctl команду. можно ходить и руками менять занчения
в /proc/sys 
тоесть sysctl никакого чуда вроде как не делает. она ходит в /proc/sys/... и меняет 
там файлы.


покажу на очень частом примере. 
мы имеем

		# cat /proc/sys/net/ipv4/ip_forward
		0

идем в sysctl.conf и меняем

	# grep -v '#' /etc/sysctl.conf 
	net.ipv4.ip_forward=1
	# sysctl -p
	net.ipv4.ip_forward = 1

проверяем что стало в /proc/sys

	# cat /proc/sys/net/ipv4/ip_forward
	1

итак  sysctl прочитал настройку в sysctl.conf и сделал изменние в соотвутсющем куске
в /proc/sys

| arch
| manjaro

по дефолту в нем нет файла /etc/sysctl.conf
его надо создвать самому руками



| sysctl 
| arch

https://archlinux.org/news/deprecation-of-etcsysctlconf/

есть такая хрень что уже 10 лет назад
системд уже не читает /etc/sysctl.conf !
поэтому его нужно переместить  в папку 


  /etc/sysctl.d/


| sysctl
| debian  13

симпомты

oot@2hst4:/etc/sysctl.d# sysctl  -p
sysctl: cannot open "/etc/sysctl.conf": No such file or directory


решение

# 1. Загрузить ВСЕ файлы sysctl (рекомендуется)
sysctl --system

# 2. Создать свой файл в /etc/sysctl.d/
echo "net.ipv6.conf.all.disable_ipv6 = 1" | sudo tee /etc/sysctl.d/10-disable-ipv6.conf
sysctl --system  # Применить

# 3. Если нужен /etc/sysctl.conf — создайте пустой
touch /etc/sysctl.conf
sysctl -p  # Теперь заработает

