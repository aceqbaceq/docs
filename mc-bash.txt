| mc
| bash

известная вещь - сидим мы в синем окне миннайт
командера а потом тыкаем Ctrl+O и попадаем 
в черный экран

как это рабоатет? 

а вот как.  есть процесс который и есть синий
экран. но также он запускает баш как дочерний процесс
и он егоные stdin\stdout проксирует через ptmx
этот баш на себя


$ echo $$
75956

$ pstree -AspT 75956
...---mc(75954)---bash(75956)


$ lsof -Pnp 75956
COMMAND   PID   USER  FD   TYPE DEVICE SIZE/OFF      NODE NAME
...
bash    75956 noroot   0u   CHR 136,20      0t0        23 /dev/pts/20
bash    75956 noroot   1u   CHR 136,20      0t0        23 /dev/pts/20
bash    75956 noroot   2u   CHR 136,20      0t0        23 /dev/pts/20

вот видим что у баша его fd/0 fd/1 fd/2 смотрят на /dev/pts/20

а вот процесс mc
$ lsof -Pnp 75954 | grep -E "COMMAND|ptmx"
COMMAND   PID   USER  FD   TYPE             DEVICE SIZE/OFF      NODE NAME
mc      75954 noroot   7u   CHR                5,2      0t0       115 /dev/ptmx

я гарантруею что /pts/20 как раз смотрит
именно на этот ptmx

поэтому когд мы тыкаем ctrl+O то mc просто напросто
выводит на экран то что летит из баша и его pts/20
на ptmx у mc процесса.

тоесть когда мы видим синий экран это выводит 
резулттата раобты самого mc процесса его кода.
а когда мы тыкаем ctrl+O то наш mc прцоесс 
проксирует через себя доступ к дочернему баш процессу

вот такой прикол!

теперь понятно поему мы скажем ссменили папку
текущую в bash прцоесе а она никак не меняется
в синем экране. ну ясен банан это два незсимвымх
процесса!

вобще мудота конечно


