ceph


установка это поделки.
документация хуйня полная.


во первых придется взять ununtu попоследнее. 
потому что хотя и заявлено что они новые релизы выкладыавют для 
нескольких версий ubuntu это хуйня полная. поэтому если хотим
релиз ceph попоследнее то придется использовать убунт попоследнее.

я взял ubuntu 20.
это новая жирная тупорылая версия которую сразу надо допиливать
	надо убрать netplan -  https://disnetern.ru/disable-netplan-ubuntu/
	надо убрать модуль floppy - онзаебет его искать и тормозить систему
	с ошибками :
			$ sudo rmmod floppy
			$ echo "blacklist floppy" | sudo tee /etc/modprobe.d/blacklist-floppy.conf
			$ sudo dpkg-reconfigure initramfs-tools

продолжаем ставить ceph

$ sudo wget -q -O- 'https://download.ceph.com/keys/release.asc' | sudo apt-key add -


$ sudo apt-add-repository 'deb https://download.ceph.com/debian-octopus/ focal main'

где focal это кодовое имя релиза ubuntu 20


проверяем какая версия ceph доступна

$ sudo apt-cache madison ceph
      ceph | 15.2.5-1focal | https://download.ceph.com/debian-octopus focal/main amd64 Packages


ставим ceph, для этого достаточно поставить только пакет ceph.
он остальное вытяент что нужно

~$ sudo apt-get -y install ceph=15.2.5-1focal





в процессе установки надо будет сгенерироваь UUID
для этого в убунте юзаем 

# uuidgen

получим чтото типа того 

badd757e-6ef9-4d70-8d8b-9f28eded1c08

когда мы потом это посдунем ceph 
он нас пошлет нафиг, и скажет что UUID неверный.

оказвыается это я ошибся! и пришлось прочитать что такое uuid
моя ошбка была в том что я скопировал uuid с экрана и потерял одну
цфиру.

так вот что такое UUID

по определению
uudi это число длинной 128 бит , если мы это число типа конвертрруем 
в буквоцифры то полуичм 32 символа. обычно принимается что в итоге 
мы дожны получить 36 символов. а у нас 32. значит надо вставить четыре
минуса. обычно по таком правиалу 8-4-4-4-12. 

по ходу установки могу рекомендовать вобще ни на  йоту не отходить
от варианту установки. например неменять назвыание кластера
на свое . пусть будет дефолтовое!!!! иначе вобще ничего незваедетсяэ!!!






команда  
# ceph-deploy gatherkeys test-ceph-01

которую надо ввлодить перед команднй

# ceph-deploy osd create ceph1:/dev/xvdf 