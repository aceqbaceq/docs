| bind
| root
| hint

естьтакой прикол.

можно сделать итеративный запрос к бинд 127.0.0.1
про домен "." напрмиер 


# dig -4 @127.0.0.1   -t NS "."  +norecurse

и он реально прям ответит!

;; ANSWER SECTION:
.			351289	IN	NS	j.root-servers.net.
.			351289	IN	NS	m.root-servers.net.
.			351289	IN	NS	c.root-servers.net.
.			351289	IN	NS	k.root-servers.net.
.			351289	IN	NS	b.root-servers.net.
.			351289	IN	NS	e.root-servers.net.
.			351289	IN	NS	g.root-servers.net.
.			351289	IN	NS	f.root-servers.net.
.			351289	IN	NS	d.root-servers.net.
.			351289	IN	NS	h.root-servers.net.
.			351289	IN	NS	a.root-servers.net.
.			351289	IN	NS	i.root-servers.net.
.			351289	IN	NS	l.root-servers.net.

;; ADDITIONAL SECTION:
a.root-servers.net.	567167	IN	A	198.41.0.4
b.root-servers.net.	351289	IN	A	170.247.170.2
c.root-servers.net.	351289	IN	A	192.33.4.12
d.root-servers.net.	351289	IN	A	199.7.91.13
e.root-servers.net.	351289	IN	A	192.203.230.10
f.root-servers.net.	351289	IN	A	192.5.5.241
g.root-servers.net.	351289	IN	A	192.112.36.4
h.root-servers.net.	351289	IN	A	198.97.190.53
i.root-servers.net.	351289	IN	A	192.36.148.17
j.root-servers.net.	351289	IN	A	192.58.128.30
k.root-servers.net.	351289	IN	A	193.0.14.129
l.root-servers.net.	351289	IN	A	199.7.83.42
m.root-servers.net.	351289	IN	A	202.12.27.33
a.root-servers.net.	351289	IN	AAAA	2001:503:ba3e::2:30
b.root-servers.net.	351289	IN	AAAA	2801:1b8:10::b
c.root-servers.net.	351289	IN	AAAA	2001:500:2::c
d.root-servers.net.	351289	IN	AAAA	2001:500:2d::d
e.root-servers.net.	351289	IN	AAAA	2001:500:a8::e
f.root-servers.net.	351289	IN	AAAA	2001:500:2f::f
g.root-servers.net.	351289	IN	AAAA	2001:500:12::d0d
h.root-servers.net.	351289	IN	AAAA	2001:500:1::53
i.root-servers.net.	351289	IN	AAAA	2001:7fe::53
j.root-servers.net.	351289	IN	AAAA	2001:503:c27::2:30
k.root-servers.net.	351289	IN	AAAA	2001:7fd::1
l.root-servers.net.	351289	IN	AAAA	2001:500:9f::42
m.root-servers.net.	351289	IN	AAAA	2001:dc3::35



спраишивается что за хуйня.
хуйея тут по двум моментам. 

во првых так как это итеративный запрос то данные
берутся не из сети а из каких то локальных файлов
хотя есть еще один вариант откуда могут постуить
данные - из стуб зоны а в ней данные оказыаются
через скачку по сети. но у нас нет на сервере
стуб зоны для "." поэтому это точно из локальных 
файлов. но опять же при итеративном запросе данные
берутся не из файлов а из зон которые хрантся
в виде файлов. но это значит что в коифниге
бинд должна быть указано создание зоны

но у нас вроде нет зоны отвеающей за домен "."


второй пиздец  в том что ответ 
выдан в секции ANSWER
дело в том что при итреативном запросе 
в этой секции записи поменщаюся только если
они автортитивные. (об этом дополнитльно
будет подрвеждоено через выставленный в 
овете флаг АА. флага нет.)  тоесть если сервер хостит
эту зону.  а это конечно же нетак. все осталые
записи должны быть только в секция AUTHORITY 
и\или ADDITINAL
тоеть неавтортиные записи вставлены в зону ансвер
где такие запииси запрешено туда автсвлять при
итератвином запросе (при рекурсивном запросе 
неавтортивыне заиписи разршено втсвлять в сецию 
ансве но у нас то запрос не рекурсиный!)


поэтому это тоже пиздец.


окзывается. в конфиге 
есть кусок про спец зону

# cat named.conf.default-zones 

zone "." {
	type hint;
	file "/usr/share/dns/root.hints";
};

итак записи рут зоны засываются через файл.
но в дампе зон мы эту зону ненайдем

 rndc dumpdb -zones

потому что  данные записи будут засунуты в
кеш! в его какуто особую подсецию. при итеративных
запросах искать в кеще нельзя. но в этом куске
можно! именно отуда бинд и вытасиквает эти записи!

получается какйото пиздец. формально записи
якобы засоываттся в зону! но на самом деле 
они идут не  в зону а в кеш! но не  в тот кещ
из ктторого разрещено читать при реурсивных
запросах а в тот кеш из ктрого можно читать при
итератиных запросах!1 пиздец!

вот этоттрюк с 

	type hint;

он работает ТОЛЬКО ДЛЯ ЗОНЫ "."  и больше 
ни для какой зоны!

итак откуда данные берутся стало понятно.
теперь момент о том почему даныные суются
в секцию ANSWER . ответа на этот вопрос я не нашел.

