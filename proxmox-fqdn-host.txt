| proxmox
| fqdn

я вот не понял такой момент.

заходим в веб морду и хост обоанчается через короткое имя тоесть не через FQDN
это именно то имя через которое в кластере потом web морда лазиит на хосты чтобы
через API посылать туда команды. так вот если у нас хост идентфиицретуся через 
короткое имя то тогда его IP нужно вбивать в /etc/hosts и нет никакой почти позвожмнтси
это орагнизовать через внешний DNS сервер. 


вот пример 


# cat /etc/hostname 
pr2-h1



# cat /etc/hosts | grep pr2
192.168.2.98 pr2-h1.loc pr2-h1


как видео тут у нас FQDN очень даже есть это  pr2-h1.loc



напомню что в /etc/hostname нельзя вбивать FQDN потому что изаачально там 
такого небыло


и вот что написано в очень важном файле

root@pr2-h1:~# cat /etc/pve/.members 
{
"nodename": "pr2-h1",
"version": 0
}


именно тут отображется под каким хостнеймом веб морда видит хосты в кластере.

я так и непонял как же заставть проксокс иденфтицирвать хост чрез FQDN


таким макаром прихостя все хостнеймы всех хстов в кластере лепить 
на кжаом хосте в /etc/hosts что охуенно недуобно



при доустпе через веб мрду по TLS она нам отлдает сертфикат для нодды и
он лежит для кадой ноды вот тут


	# ls -1 /etc/pve/nodes/pr2-h1/pve-ssl.pem 
	/etc/pve/nodes/pr2-h1/pve-ssl.pem



вот его контент



# openssl x509 -noout -text -in /etc/pve/nodes/pr2-h1/pve-ssl.pem  | grep CN
        Subject: OU=PVE Cluster Node, O=Proxmox Virtual Environment, CN=pr2-h1.loc


# openssl x509 -noout -text -in /etc/pve/nodes/pr2-h1/pve-ssl.pem  | grep -E "X509v3 Subject 
Alternative Name:" -A 10


            X509v3 Subject Alternative Name: 
                IP Address:127.0.0.1, 
                IP Address:0:0:0:0:0:0:0:1, 
                DNS:localhost, 
                IP Address:192.168.2.98, 
                DNS:pr2-h1, 
                DNS:pr2-h1.loc


таким образом сертфикиат соледержмт всеовзможные хрени которые только можно было
насовать про этот хост . ип адерса. и доменные имена и хостнейм и чеготоько тут нет.





