kubernetes
как убрать ноду из кластера \ и как эту ноду обратно rejoin к кубу

как убрать:

$ kubectl cordon имя_ноды

эта команда говоит кубу чтобы он новые поды на эту ноду не пихал

$ kubectl drain имя_ноды

эта команда типа заставляет куб поды которые крутятся на этой ноде
начать из нее убирать и запускать на других хостах

при это куб напишет что он неможет убрать с этой ноды демонсеты.

насколько понимаю те демонсеты которые не kube-proxy и не flannel
их надо поудалять руками 

$ kubectl delete pod/имя_пода

оставляем на ноде куб прокси и фланнель только.

далее удаляем ноду

$ kubectl delete nodes имя_ноды

проверяем что ее нет в списке нод

$ kubectl get nodes

--
бывает так что удалил ноду а оказывается ее нужно обратно вернуть.

положим мы ее только удалили и больше никаких деструктивных дейсвтий 
не сделали на ноде.

тогда чтобы ее обратно вернуть в кластер достатоно на ней самой просто
перезапустить службу kubelet

заходим на дата ноду и:

	(дата-нода)$ sudo systemctl restart kubelet

--
